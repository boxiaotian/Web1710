<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
	</body>
</html>

<script type="text/javascript" src="js/ajax-3.0.js" ></script>

<script>
// 思路：
//   1. ajax获取服务器中购物车的数据          
//   2. 将数据显示到页面上

var json = {
	"username": "qinfeng",
	password: "888888",
	status: "login"
}


//364644cf2bd497569008b9319c72e908
//0e819ac54fd1b2fcca5357aa68aeadb3
//60723f5ad433489a3983bd10ba22ec7e

// 调用函数
loginOrRegister(json, function(obj) {
	if (obj.code == 0) {
		
		console.log(obj.data.token)
		
		
		// obj.data.token = "afff1efbf137df2cd25721d892aeb76e"
		
		setTimeout(function() {
			getData(obj.data.token)
		}, 2000)
	}
})

function getData(token) {
	
	ajax({
		method: "GET",
		url: "http://csit.top/api_cart.php",
		json: {},
		token: token,
		cb: function (a) {
			
			console.log(a)
			
			var arr = a.data   	// 取出数组
			
			var str = ""		// 空字符串
			
			for (var i = 0; i < arr.length; i++) {		// 循环拼接
				str += '<img style="width:100px" src="'+ arr[i].goods_thumb +'" />'			// 拼接商品图片
				str += ", 商品：" + arr[i].goods_name			// 拼接商品名
				str += ", 数量：" + arr[i].goods_number	// 拼接商品数量
				str += ", 单价：" + arr[i].goods_price	// 拼接商品单价
				str += "<br>"
			}
			
			document.body.innerHTML = str
		}
	})
}

</script>
